<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>Une image - Une histoire</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="description" content="Découvrez 'Une image - Une histoire' à partir des photographies de Francis de Faccio. Des histoires à suivre, immersives et des récits mystérieux." />
<meta name="keywords" content="science-fiction, animation, Francis de Faccio, histoire audio, fiction immersive, transmission, extraterrestre, photographie" />
<style>
body { margin: 0; padding: 0; font-family: monospace; color: lime; background: black; text-align: center; }
h1 { font-size: 3rem; margin: 40px 0 20px 0; color: #00ff80; }
p.subtitle { font-size: 1.3rem; margin: 15px 0; color: #00ff80; }
button, a#backPhoto { margin: 20px; padding: 10px 18px; font-size: 1rem; cursor: pointer; border: 1px solid #00ff80; border-radius: 6px; background: rgba(0,255,128,0.06); color: #00ff80; text-decoration: none; display: inline-block; transition: background .12s, color .12s; }
button:hover, a#backPhoto:hover { background: #00ff80; color: #001; }
.popup { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; overflow: hidden; align-items: stretch; justify-content: center; }
.popup .bg { position: absolute; top: 50%; left: 50%; height: 100%; width: auto; transform: translate(-50%, -50%); object-fit: contain; filter: none; background-color: black; z-index: 1000; }
.popup .text { position: absolute; bottom: 10%; left: 5%; right: 5%; text-align: center; font-size: clamp(1.2rem, 2.4vw, 2rem); letter-spacing: 0.12em; color: #00ff80; white-space: pre-wrap; z-index: 1002; opacity: 0; }
.close-btn, .return-link { position: absolute; top: 2%; padding: 6px 10px; font-size: 1.05rem; border-radius: 6px; border: 1px solid #00ff80; background: rgba(0,255,128,0.06); color: #00ff80; text-decoration: none; cursor: pointer; z-index: 1003; transition: background .12s, color .12s; }
.close-btn:hover, .return-link:hover { background: #00ff80; color: #001; }
.close-btn { right: 2%; }
.return-link { left: 2%; padding-left: 12px; padding-right: 12px; }
.popup audio { position: absolute; bottom: 6%; left: 50%; transform: translateX(-50%); z-index: 1002; width: min(90%, 720px); }
@media (max-width:600px){
  h1 { font-size: 2rem; margin: 25px 0 15px 0; }
  p.subtitle { font-size: 1rem; }
  .popup .text { font-size: 1.1rem; bottom: 12%; padding: 0 8px; }
  .close-btn, .return-link { font-size: 0.95rem; padding: 6px 8px; }
  button, a#backPhoto { font-size: 0.95rem; padding: 8px 16px; }
}
</style>
</head>
<body>
<h1>Une image - Une histoire</h1>
<p class="subtitle">Evzone.fr propose un terrain de jeu pour notre imagination.</p>
<p class="subtitle">Mes images émettent un signal… à qui sait l’écouter. — Francis de Faccio</p>
<a id="backPhoto" href="photographie.html">← Retour page Photographie</a>

<!-- Boutons -->
<button id="btn1">▶ Heure bleue</button>
<button id="btn2">▶ Abîme</button>
<button id="btn3">▶ Voie lactée</button>
<button id="btn3b">▶ Artefact</button>
<button id="btn4">▶ Sanctuaire</button>
<button id="btn5">▶ Écume</button>
<button id="btn6">▶ Sentinelle</button>
<button id="btn7">▶ Lune du Chasseur</button>
<button id="btn8">▶ Perlimpinpin</button>

<!-- Popups -->
<div id="popup1" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn1">✖</button>
  <img class="bg" src="images/episodes/episode1/ta_photo_heure_bleue.jpg" alt="Fond épisode 1" />
  <div class="text" id="text1"></div>
  <audio id="audio1" preload="auto"></audio>
</div>

<div id="popup2" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn2">✖</button>
  <img class="bg" src="images/episodes/episode2/episode_02-gouffre-de-padirac.jpg" alt="Fond épisode 2" />
  <div class="text" id="text2"></div>
  <audio id="audio2" preload="auto"></audio>
</div>

<div id="popup3" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn3">✖</button>
  <img class="bg" src="images/episodes/episode3/mont_gargan.jpg" alt="Fond épisode 3" />
  <div class="text" id="text3"></div>
  <audio id="audio3" preload="auto"></audio>
</div>

<div id="popup3b" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn3b">✖</button>
  <img class="bg" src="images/episodes/episode3_bis/cloche.jpg" alt="Fond épisode 3 bis" />
  <div class="text" id="text3b"></div>
  <audio id="audio3b" preload="auto"></audio>
</div>

<div id="popup4" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn4">✖</button>
  <img class="bg" src="images/episodes/episode4/chapelle_rocamadour.jpg" alt="Chapelle de Rocamadour" />
  <div class="text" id="text4"></div>
  <audio id="audio4" preload="auto"></audio>
</div>

<div id="popup5" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn5">✖</button>
  <img class="bg" src="images/episodes/episode5/plage_tamarissiere.jpg" alt="Plage Tamarissière" />
  <div class="text" id="text5"></div>
  <audio id="audio5" preload="auto"></audio>
</div>

<div id="popup6" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn6">✖</button>
  <img class="bg" src="images/episodes/episode6/statue_poetique.jpg" alt="Statue poétique de Masseret" />
  <div class="text" id="text6"></div>
  <audio id="audio6" preload="auto"></audio>
</div>

<div id="popup7" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn7">✖</button>
  <img class="bg" src="images/episodes/episode7/super_lune_du_chasseur.jpg" alt="Super Lune du Chasseur" />
  <div class="text" id="text7"></div>
  <audio id="audio7" preload="auto"></audio>
</div>

<!-- Épisode 8 : Perlimpinpin -->
<div id="popup8" class="popup" aria-hidden="true" role="dialog">
  <a class="return-link" href="une_image_une_histoire.html">← Retour</a>
  <button class="close-btn" id="closeBtn8">✖</button>
  <img class="bg" src="images/episodes/episode8/perlimpinpin.jpg" alt="Perlimpinpin, festival médiéval de Saint Léonard de Noblat" />
  <div class="text" id="text8"></div>
  <audio id="audio8" preload="auto"></audio>
</div>

<script>
// --- Scénarios et sons ---
const scenarios1 = [
  ">>> Transmission Alien activée…\n>>> Coordonnées 45.540210, 1.520049\n>>> Tour de surveillance repérée à 535m d’altitude\n>>> Panorama stratégique confirmé\n>>> Ouverture du canal niveau 1...",
  ">>> Signal retrouvé…\n>>> Balise terrienne dissimulée dans la tour…\n>>> Les anciens observateurs ont quitté la zone.\n>>> Notre surveillance reprend.",
  ">>> Scan atmosphérique en cours…\n>>> Résonance détectée : heure bleue\n>>> La tour diffuse\n>>> Connexion activée\n>>> Transmission...",
  ">>> Point stratégique identifié : Tour de Masseret\n>>> Altitude 535m : visibilité totale\n>>> Secteurs : Millevaches, Monédières\n>>> Surveillance engagée…",
  ">>> Accès mémoire : Table d’orientation terrienne\n>>> observation du ciel\n>>> altitude 535m",
  ">>> Transmission en clair : pour ceux qui lisent\n>>> La tour de Masseret est un phare entre deux mondes\n>>> ouverture du passage\n>>> RDV au sommet"
];
const sounds1 = ["images/episodes/episode1/contact_balise.wav","images/episodes/episode1/son_episode1.wav"];

const scenarios2 = [
  ">>> Ce point d’accès détecté se nommait Gouffre de Padirac\n>>> Structures métalliques terriennes confirmées\n>>> Nous progressons dans la profondeur\n>>> Transmission : le passage mène encore plus bas",
  ">>> Archive terrienne : année 1889\n>>> Edouard-Alfred Martel part à la découverte du Gouffre de Padirac\n>>> Descente des premiers humains par corde\n>>> Ils ne savaient pas ce qui les attendait\n>>> construction métallique 36 mètres, octobre 1898",
  ">>> L’ouverture du gouffre : Portail entre deux mondes ?\n>>> Chaque goutte d’eau, une onde de passage\n>>> Sommes-nous vraiment seuls ici ?",
  ">>> Balise détectée : signal intermittent\n>>> Les terriens pensaient visiter une curiosité\n>>> En réalité, ils approcheront une base\n>>> Activité confirmée sous le niveau zéro"
];
const sounds2 = [
  "images/episodes/episode2/01_sonepisode2.mp3",
  "images/episodes/episode2/enter-the-cave.mp3",
  "images/episodes/episode2/explorers.mp3",
  "images/episodes/episode2/low-spaceship.mp3",
  "images/episodes/episode2/oscillating.mp3",
  "images/episodes/episode2/space-trave.mp3"
];

const scenarios3 = [">>> Activité cosmique détectée\n>>> Alignement : Mont Gargan ↔ Voie lactée"];
const sounds3 = ["images/episodes/episode3/son_mont_gargan.mp3"];

const scenarios3b = [">>> la cloche du Mont Gargan\n>>> cet artefact rayonne sur toute la vallée"];
const sounds3b = ["images/episodes/episode3_bis/cloche.mp3"];

const scenarios4 = [
  ">>> la chapelle s’ouvre sur la Voie Sainte de 216 marches\n>>> abritée sous le rocher\n>>> alors la statue de la Vierge Noire apparaît",
  ">>> il n’y a plus d’épée visible aujourd’hui\n>>> plus de traces fiables\n>>> mais la légende imprègne le lieu"
];
const sounds4 = [
  "images/episodes/episode4/rocamadour01.mp3",
  "images/episodes/episode4/rocamadour02.mp3",
  "images/episodes/episode4/rocamadour03.mp3",
  "images/episodes/episode4/rocamadour04.mp3",
  "images/episodes/episode4/rocamadour05.mp3"
];

const scenarios5 = [
  ">>> La lumière ne dort jamais\n>>> Elle glisse sous la mer\n>>> pour renaître ailleurs",
  ">>> Entre le jour et la nuit, il y a un passage.\n>>> Ce moment s’appelle l’Aurore…",
  ">>> Le crépuscule ouvre parfois des portes.\n>>> Si tu écoutes le ressac…"
];
const sounds5 = [
  "images/episodes/episode5/plage_tamarissiere01.mp3",
  "images/episodes/episode5/plage_tamarissiere02.wav"
];

const scenarios6 = [
  ">>> Transmission activée…\n>>> Coordonnées : X 45.533329 | Y 1.51667\n>>> Localisation : Bourg de Masseret, zone rurale stable\n>>> Scan en cours…",
  ">>> Nouvel artefact\n>>> mémoire ancienne détectée.\n>>> Analyse morphologique : figure féminine\n>>> Origine : art humain, période indéterminée.",
  ">>> Les capteurs détectent un écho faible\n>>> comme une onde qui traverse le temps\n>>> Peut-être une pensée, figée dans la pierre\n>>> Artefact confirmé : trace d’humanité.\n>>> Transmission terminée.",
  ">>> Transmission activée…\n>>> Données reçues : structure pierreuse, densité stable.\n>>> Sculpture d’origine humaine, époque imprécise.\n>>> Anomalie : fréquence émotionnelle détectée à 3.2 Hz.\n>>> Hypothèse : empreinte mental d’un créateur.\n>>> Observation : l’art survit mieux que l’espèce.\n>>> Fin de l’analyse.",
  ">>> Signal faible en provenance du secteur Masseret.\n>>> Artefact visuel : forme anthropomorphe féminine.\n>>> Traces d’érosion, altération minimale.\n>>> Détection d’un champ mémoriel statique.\n>>> Conclusion : objet rituel ou témoignage artistique.\n>>> Données archivées.",
  ">>> Scan complet.\n>>> combinaison typique des civilisations terriennes.\n>>> Anomalie : concentration émotionnelle au-dessus de la norme.\n>>> Système émotionnel inactif depuis 2000 cycles.\n>>> Artefact conservé.",
  ">>> [Données corrompues]\n>>> ...forme féminine détectée...\n>>> ...émission d’un champ émotionnel...\n>>> ...mémoire humaine... persistante...\n>>> // Erreur de décodage //\n>>> Reconnexion en cours…",
  ">>> Coordonnées instables.\n>>> Image floue. Mouvement dans la pierre.\n>>> …Non, pas possible.\n>>> Redémarrage des capteurs.\n>>> Fin de séquence.",
  ">>> === WARNING ===\n>>> Transmission en boucle depuis 223 ans.\n>>> Message répété :\n>>> “Je me souviens.”\n>>> “Je me souviens.”\n>>> “Je…”\n>>> Fin de transmission."
];
const sounds6 = [
  "images/episodes/episode6/statue_poetique01.mp3",
  "images/episodes/episode6/statue_poetique02.mp3",
  "images/episodes/episode6/statue_poetique03.mp3"
];

const scenarios7 = [
  ">>>Transmission activée…\n>>> Source optique : Evzone Orbiter\n>>>La Lune, fidèle compagne de la Terre\n>>>la Lune montre Toujours la même face à la Terre.\n>>>sa face cachée a été photographiée pour la première fois en 1959 par la sonde soviétique Luna 3.\n>>>Elle est plus rugueuse, criblée de cratères, et dépourvue de mers lunaires\n>>>l’attraction gravitationnelle de la Lune tire sur les océans d’où deux marées hautes par jour.\n>>> Fin de transmission.",
  ">>>Transmission activée…\n>>> La Lune est la complice du Soleil.\n>>>Il produit la lumière,\n>>>Elle donne le rythme.\n>>>Ensemble, ils ont créé le cycle de la vie.\n>>>Fin de transmission.",
  ">>>Transmission activée…\n>>>Vitesse moyenne : 3 680 km/h.\n>>>Distance : 384 400 km\n>>>Phase : Lune du Chasseur\n>>>shootée avec un canon r6 mark II le 07 10 2025 à 21h55\n>>>Fin de transmission.",
  ">>>Transmission activée…\n>>>Lune s’est formée il y a environ 4,5 milliards d’années\n>>>très peu de temps après la formation de la Terre\n>>>elle est inhospitalière à la vie\n>>>elle est essentielle à la vie sur Terre\n>>>Jour lunaire +127 °C Jour lunaire –173 °C\n>>>Ces écarts de 300 °C entre le jour et la nuit sont énormes.\n>>>Fin de transmission."
];
const sounds7 = [
  "images/episodes/episode7/lune_du_chasseur_01.mp3",
  "images/episodes/episode7/lune_du_chasseur_02.mp3",
  "images/episodes/episode7/lune_du_chasseur_03.mp3",
  "images/episodes/episode7/lune_du_chasseur_04.mp3",
  "images/episodes/episode7/lune_du_chasseur_05.mp3",
  "images/episodes/episode7/lune_du_chasseur_06.mp3",
  "images/episodes/episode7/lune_du_chasseur_07.mp3",
  "images/episodes/episode7/lune_du_chasseur_08.mp3"
];

// --- Épisode 8 : Perlimpinpin ---
const scenarios8 = [
`>>>Transmission activée…
>>>Archive numérique
>>>Cet augmenté projetait une poudre
>>>Cette farine diffusait des odeurs, des sons 
>>>inhalée, elle dévérouillait le code source des cyborgs
>>>Ce piratage politique fut interdit
>>>Fin de transmission.`,

`>>>Signal retrouvé…
>>>Les cyborgs cherchent cette recette.
>>>Une poussière d’orge, de cuivre et de rêves humains.
>>>Les prophètes augmentés annonçaient qu’elle donnerait la liberté et une âme aux machines.
>>>Effacement en cours…
>>>Fin de transmission.`,

`>>>Signal retrouvé…
>>>L’Augmenté du festival médiéval de Saint Léonard de Noblat lança la poudre dans le vent.
>>>Les cyborgs se réveillèrent, un à un.
>>>Dans la foule, un murmure :
>>>“Le code est libre.”
>>>Puis le silence revint.
>>>Fin de transmission.`
];
const sounds8 = [
  "images/episodes/episode8/perlimpinpin01.mp3",
  "images/episodes/episode8/perlimpinpin02.mp3",
  "images/episodes/episode8/perlimpinpin03.mp3",
  "images/episodes/episode8/perlimpinpin04.mp3"
];

// --- Fonction principale ---
function openPopup(n, scenarios, sounds) {
  const pop = document.getElementById("popup" + n);
  const audio = document.getElementById("audio" + n);
  const txtElem = document.getElementById("text" + n);
  if (!pop || !txtElem || !audio) return;
  const text = scenarios[Math.floor(Math.random() * scenarios.length)];
  txtElem.textContent = "";
  txtElem.style.opacity = 1;
  const soundFile = sounds[Math.floor(Math.random() * sounds.length)];
  audio.src = soundFile;
  audio.volume = 1.0;
  audio.play().catch(()=>{});
  pop.style.display = "flex";
  pop.setAttribute('aria-hidden','false');

  const lettreSound = new Audio("images/interface/lettre.mp3");
  const retourSound = new Audio("images/interface/retour.mp3");
  let i = 0;
  function step() {
    if (i < text.length) {
      txtElem.textContent = text.slice(0, i+1);
      const char = text[i];
      if (char === "\n") { retourSound.currentTime = 0; retourSound.play().catch(()=>{}); }
      else { lettreSound.currentTime = 0; lettreSound.play().catch(()=>{}); }
      i++;
      setTimeout(step, 80);
    }
  }
  step();
}

function closePopup(n) {
  const pop = document.getElementById("popup" + n);
  const audio = document.getElementById("audio" + n);
  const txtElem = document.getElementById("text" + n);
  if (audio) { audio.pause(); audio.currentTime = 0; }
  if (pop) { pop.style.display = "none"; pop.setAttribute('aria-hidden','true'); }
  if (txtElem) txtElem.textContent = "";
}

// --- Boutons ---
document.getElementById("btn1").addEventListener('click', ()=> openPopup(1,scenarios1,sounds1));
document.getElementById("btn2").addEventListener('click', ()=> openPopup(2,scenarios2,sounds2));
document.getElementById("btn3").addEventListener('click', ()=> openPopup(3,scenarios3,sounds3));
document.getElementById("btn3b").addEventListener('click', ()=> openPopup("3b",scenarios3b,sounds3b));
document.getElementById("btn4").addEventListener('click', ()=> openPopup(4,scenarios4,sounds4));
document.getElementById("btn5").addEventListener('click', ()=> openPopup(5,scenarios5,sounds5));
document.getElementById("btn6").addEventListener('click', ()=> openPopup(6,scenarios6,sounds6));
document.getElementById("btn7").addEventListener('click', ()=> openPopup(7,scenarios7,sounds7));
document.getElementById("btn8").addEventListener('click', ()=> openPopup(8,scenarios8,sounds8));

["1","2","3","3b","4","5","6","7","8"].forEach(n=>{
  const btn = document.getElementById("closeBtn"+n);
  if (btn) btn.addEventListener('click', ()=> closePopup(n));
});
</script>
</body>
</html>
